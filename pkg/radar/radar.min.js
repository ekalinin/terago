function radar_visualization(e){e.svg_id=e.svg||"radar",e.width=e.width||1450,e.height=e.height||1e3,e.colors="colors"in e?e.colors:{background:"#fff",grid:"#dddde0",inactive:"#ddd"},e.print_layout=!("print_layout"in e)||e.print_layout,e.links_in_new_tabs=!("links_in_new_tabs"in e)||e.links_in_new_tabs,e.repo_url=e.repo_url||"#",e.print_ring_descriptions_table="print_ring_descriptions_table"in e&&e.print_ring_descriptions_table,e.legend_offset=e.legend_offset||[{x:450,y:90},{x:-675,y:90},{x:-675,y:-310},{x:450,y:-310}],e.title_offset=e.title_offset||{x:-675,y:-420},e.footer_offset=e.footer_offset||{x:-155,y:450},e.legend_column_width=e.legend_column_width||140,e.legend_line_height=e.legend_line_height||10;var t,n,o,a,c,l,d,u,h,m,f,p,y,_,w,k,S,D=42;function g(){var e=Math.sin(D++)*1e4;return e-Math.floor(e)}function L(e,t){return e+g()*(t-e)}function R(e,t){return e+(g()+g())*.5*(t-e)}const i=[{radial_min:0,radial_max:.5,factor_x:1,factor_y:1},{radial_min:.5,radial_max:1,factor_x:-1,factor_y:1},{radial_min:-1,radial_max:-.5,factor_x:-1,factor_y:-1},{radial_min:-.5,radial_max:0,factor_x:1,factor_y:-1}],r=[{radius:130},{radius:220},{radius:310},{radius:400}];function x(e){var t=e.x,n=e.y;return{t:Math.atan2(n,t),r:(t*t+n*n)**.5}}function j(e){return{x:e.r*Math.cos(e.t),y:e.r*Math.sin(e.t)}}function v(e,t,n){var s=Math.min(t,n),o=Math.max(t,n);return Math.min(Math.max(e,s),o)}function F(e,t,n){return{t:e.t,r:v(e.r,t,n)}}function C(e,t,n){return{x:v(e.x,t.x,n.x),y:v(e.y,t.y,n.y)}}function T(e,t){var n={t:i[e].radial_min*Math.PI,r:t===0?30:r[t-1].radius},s={t:i[e].radial_max*Math.PI,r:r[t].radius},o={x:15*i[e].factor_x,y:15*i[e].factor_y},a={x:r[3].radius*i[e].factor_x,y:r[3].radius*i[e].factor_y};return{clipx:function(e){var t=C(e,o,a),i=F(x(t),n.r+15,s.r-15);return e.x=j(i).x,e.x},clipy:function(e){var t=C(e,o,a),i=F(x(t),n.r+15,s.r-15);return e.y=j(i).y,e.y},random:function(){return j({t:L(n.t,s.t),r:R(n.r,s.r)})}}}for(t=0;t<e.entries.length;t++)n=e.entries[t],n.segment=T(n.quadrant,n.ring),p=n.segment.random(),n.x=p.x,n.y=p.y,n.color=n.active||e.print_layout?e.rings[n.ring].color:e.colors.inactive;l=new Array(4);for(let e=0;e<4;e++){l[e]=new Array(4);for(a=0;a<4;a++)l[e][a]=[]}for(t=0;t<e.entries.length;t++)n=e.entries[t],l[n.quadrant][n.ring].push(n);S=1;for(quadrant of[2,3,1,0])for(a=0;a<4;a++){u=l[quadrant][a],u.sort(function(e,t){return e.label.localeCompare(t.label)});for(t=0;t<u.length;t++)u[t].id=""+S++}function s(e,t){return"translate("+e+","+t+")"}function N(e){return[Math.max(0,i[e].factor_x*400)-420,Math.max(0,i[e].factor_y*400)-420,440,440].join(" ")}e.scale=e.scale||1,m=e.width*e.scale,_=e.height*e.scale,y=d3.select("svg#"+e.svg_id).style("background-color",e.colors.background).attr("width",m).attr("height",_),o=y.append("g"),"zoomed_quadrant"in e?y.attr("viewBox",N(e.zoomed_quadrant)):o.attr("transform",s(m/2,_/2).concat(`scale(${e.scale})`)),c=o.append("g"),e.font_family=e.font_family||"Arial, Helvetica",c.append("line").attr("x1",0).attr("y1",-400).attr("x2",0).attr("y2",400).style("stroke",e.colors.grid).style("stroke-width",1),c.append("line").attr("x1",-400).attr("y1",0).attr("x2",400).attr("y2",0).style("stroke",e.colors.grid).style("stroke-width",1),k=c.append("defs"),h=k.append("filter").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("id","solid"),h.append("feFlood").attr("flood-color","rgb(0, 0, 0, 0.8)"),h.append("feComposite").attr("in","SourceGraphic");for(t=0;t<r.length;t++)c.append("circle").attr("cx",0).attr("cy",0).attr("r",r[t].radius).style("fill","none").style("stroke",e.colors.grid).style("stroke-width",1),e.print_layout&&c.append("text").text(e.rings[t].name).attr("y",-r[t].radius+62).attr("text-anchor","middle").style("fill",e.rings[t].color).style("opacity",.35).style("font-family",e.font_family).style("font-size","42px").style("font-weight","bold").style("pointer-events","none").style("user-select","none");function b(t,n,o,i=null,a=null){const c=n<2?0:o;let r=i==null?-16:i*e.legend_line_height;return n%2===1&&(r=r+36+a),s(e.legend_offset[t].x+c,e.legend_offset[t].y+r)}if(e.print_layout){o.append("a").attr("href",e.repo_url).attr("transform",s(e.title_offset.x,e.title_offset.y)).append("text").attr("class","hover-underline").text(e.title).style("font-family",e.font_family).style("font-size","30").style("font-weight","bold"),o.append("text").attr("transform",s(e.title_offset.x,e.title_offset.y+20)).text(e.date||"").style("font-family",e.font_family).style("font-size","14").style("fill","#999"),o.append("text").attr("transform",s(e.footer_offset.x,e.footer_offset.y)).text("▲ moved up     ▼ moved down     ★ new     ⬤ no change").attr("xml:space","preserve").style("font-family",e.font_family).style("font-size","12px");const t=o.append("g");for(let n=0;n<4;n++){t.append("text").attr("transform",s(e.legend_offset[n].x,e.legend_offset[n].y-45)).text(e.quadrants[n].name).style("font-family",e.font_family).style("font-size","18px").style("font-weight","bold");let o=0;for(let s=0;s<4;s++)s%2===0&&(o=0),t.append("text").attr("transform",b(n,s,e.legend_column_width,null,o)).text(e.rings[s].name).style("font-family",e.font_family).style("font-size","12px").style("font-weight","bold").style("fill",e.rings[s].color),t.selectAll(".legend"+n+s).data(l[n][s]).enter().append("a").attr("href",function(e){return e.link?e.link:"#"}).attr("target",function(t){return t.link&&e.links_in_new_tabs?"_blank":null}).append("text").attr("transform",function(t,i){return b(n,s,e.legend_column_width,i,o)}).attr("class","legend"+n+s).attr("id",function(e){return"legendItem"+e.id}).text(function(e){return e.id+". "+e.label}).style("font-family",e.font_family).style("font-size","11px").on("mouseover",function(e,t){M(t),O(t)}).on("mouseout",function(e,t){A(t),E(t)}).call(z).each(function(){o+=d3.select(this).node().getBBox().height})}}function z(t){let n=0;t.each(function(){const t=d3.select(this),o=t.text().split(" ");let s=[];const r=`${t.text().split(".")[0]}. |`,c=t.append("tspan").text(r),l=t.append("tspan").text("|"),d=c.node().getComputedTextLength()-l.node().getComputedTextLength();t.text(null);let i=t.append("tspan").attr("x",0).attr("y",n).attr("dy",0);for(let n=0;n<o.length;n++)s.push(o[n]),i.text(s.join(" ")),i.node().getComputedTextLength()>e.legend_column_width&&n!==1&&(s.pop(),i.text(s.join(" ")),s=[o[n]],i=t.append("tspan").attr("x",d).attr("dy",e.legend_line_height).text(o[n]));const a=t.node().getBBox();n=a.y+a.height})}w=o.append("g").attr("id","rink"),d=o.append("g").attr("id","bubble").attr("x",0).attr("y",0).style("opacity",0).style("pointer-events","none").style("user-select","none"),d.append("rect").attr("rx",4).attr("ry",4).style("fill","#333"),d.append("text").style("font-family",e.font_family).style("font-size","10px").style("fill","#fff"),d.append("path").attr("d","M 0,0 10,0 5,8 z").style("fill","#333");function M(t){if(t.active||e.print_layout){var o=d3.select("#bubble text").text(t.label),n=o.node().getBBox();d3.select("#bubble").attr("transform",s(t.x-n.width/2,t.y-16)).style("opacity",.8),d3.select("#bubble rect").attr("x",-5).attr("y",-n.height).attr("width",n.width+10).attr("height",n.height+4),d3.select("#bubble path").attr("transform",s(n.width/2-5,3))}}function A(){var t=d3.select("#bubble").attr("transform",s(0,0)).style("opacity",0)}function O(e){var t=document.getElementById("legendItem"+e.id);t.setAttribute("filter","url(#solid)"),t.setAttribute("fill","white")}function E(e){var t=document.getElementById("legendItem"+e.id);t.removeAttribute("filter"),t.removeAttribute("fill")}f=w.selectAll(".blip").data(e.entries).enter().append("g").attr("class","blip").attr("transform",function(t,n){return b(t.quadrant,t.ring,e.legend_column_width,n)}).on("mouseover",function(e,t){M(t),O(t)}).on("mouseout",function(e,t){A(t),E(t)}),f.each(function(t){var s,n=d3.select(this);t.active&&Object.prototype.hasOwnProperty.call(t,"link")&&t.link&&(n=n.append("a").attr("xlink:href",t.link),e.links_in_new_tabs&&n.attr("target","_blank")),t.moved==1?n.append("path").attr("d","M -11,5 11,5 0,-13 z").style("fill",t.color):t.moved==-1?n.append("path").attr("d","M -11,-5 11,-5 0,13 z").style("fill",t.color):t.moved==2?n.append("path").attr("d",d3.symbol().type(d3.symbolStar).size(200)).style("fill",t.color):n.append("circle").attr("r",9).attr("fill",t.color),(t.active||e.print_layout)&&(s=e.print_layout?t.id:t.label.match(/[a-z]/i),n.append("text").text(s).attr("y",3).attr("text-anchor","middle").style("fill","#fff").style("font-family",e.font_family).style("font-size",function(){return s.length>2?"8px":"9px"}).style("pointer-events","none").style("user-select","none"))});function P(){f.attr("transform",function(e){return s(e.segment.clipx(e),e.segment.clipy(e))})}d3.forceSimulation().nodes(e.entries).velocityDecay(.19).force("collision",d3.forceCollide().radius(12).strength(.85)).on("tick",P);function H(){var s,t=d3.select("body").append("table").attr("class","radar-table").style("border-collapse","collapse").style("position","relative").style("top","-70px").style("margin-left","50px").style("margin-right","50px").style("font-family",e.font_family).style("font-size","13px").style("text-align","left"),o=t.append("thead"),i=t.append("tbody"),n=`${100/e.rings.length}%`,a=o.append("tr").style("border","1px solid #ddd");a.selectAll("th").data(e.rings).enter().append("th").style("padding","8px").style("border","1px solid #ddd").style("background-color",e=>e.color).style("color","#fff").style("width",n).text(e=>e.name),s=i.append("tr").style("border","1px solid #ddd"),s.selectAll("td").data(e.rings).enter().append("td").style("padding","8px").style("border","1px solid #ddd").style("width",n).text(e=>e.description)}e.print_ring_descriptions_table&&H()}